const content = {
  en: {
    "site-title": "YiSONIC Semi.",
    "brand-tagline": "The Sound of Precision",
    "logo-mark": "Yi",
    "nav-home": "Home",
    "nav-about": "About",
    "nav-tech": "Core Technology",
    "nav-aidvd": "AIDVD Applications",
    "nav-servo": "Servo Motor Solutions",
    "nav-adv": "Advantages",
    "nav-manufacturing": "Manufacturing & Partners",
    "nav-contact": "Contact",
    "lang-en": "English",
    "lang-ja": "日本語",
    "hero-title": "Ultrasonic Intelligence for the Next Generation of Precision Sensing",
    "hero-subtitle": "YiSONIC Semi. specializes in AlN-based piezoelectric micromachined ultrasonic transducer (PMUT) chips and modules, turning sound into precise sensing of angle, identification, distance, velocity, and density for robotics, automotive, and industrial control.",
    "hero-cta-1": "View Our Advantages",
    "hero-cta-2": "Contact Us",
    "hero-bullet-1": "Independently developed AlN-based PMUT chips and ultrasonic sensing systems",
    "hero-bullet-2": "True non-contact angle and distance sensing immune to EM interference and high temperature",
    "hero-bullet-3": "Servo motors plus custom micro motors for complete AIDVD solutions",
    "hero-visual-title": "AlN PMUT",
    "hero-visual-highlight": "Ultrasonic Intelligence",
    "hero-visual-note": "Angle · Identification · Distance · Velocity · Density",
    "about-title": "About YiSONIC & TOUNGMEI",
    "about-subtitle": "From Taipei to Shenzhen, connecting deep-tech R&D with a strong distribution network.",
    "about-card-1-title": "YiSONIC Semi. (Taipei)",
    "about-card-2-title": "Founder & R&D",
    "about-card-3-title": "TOUNGMEI (Hong Kong / Shenzhen / Shanghai)",
    "about-paragraph-1": "YiSONIC focuses on independently developed AlN-based PMUT chips and ultrasonic systems, delivering complete AIDVD sensing and measurement solutions across angle, identification, distance, velocity, and density.",
    "about-paragraph-2": "Founder and General Manager Dr. Eason Y. H. Chiu holds a Ph.D. from Peking University’s School of Integrated Circuits, with numerous publications and over 29 invention patents on AlN PMUT-based ultrasonic sensing and TOF systems.",
    "about-paragraph-3": "TOUNGMEI has 30+ years of component distribution experience across Hong Kong and Mainland China, serving 300+ customers in automotive, mobile, home appliances, and robotics with BLDC motors, connectors, and precision parts.",
    "about-metric-1-title": "29+",
    "about-metric-1-desc": "Patents and research outputs",
    "about-metric-2-title": "30+",
    "about-metric-2-desc": "Years of channel & sales experience",
    "about-metric-3-title": "300+",
    "about-metric-3-desc": "Customers and partner brands",
    "tech-title": "Core Technology – AlN PMUT Microsystems",
    "tech-subtitle": "From device structure to readout circuits, engineered for stable and accurate ultrasonic sensing.",
    "tech-card-1-title": "Innovative suspended structure",
    "tech-card-1-desc": "Double-beam suspended AlN PMUT enhances acoustic pressure and widens emission angle for short- and mid-range sensing in constrained spaces.",
    "tech-card-2-title": "Temperature reliability",
    "tech-card-2-desc": "Validated across temperature variations to ensure stability for real-world use, including thermal management in power electronics.",
    "tech-card-3-title": "Low-power TDC readout",
    "tech-card-3-desc": "Integrated ultrasonic TOF readout IC with PMUT achieves up to 5 m ranging with ~0.63 mm distance error for battery-powered, compact modules.",
    "highlight-1-title": "5 m",
    "highlight-1-desc": "Ultrasonic ranging distance",
    "highlight-2-title": "≈ 0.63 mm",
    "highlight-2-desc": "Distance error",
    "highlight-3-title": "Double-beam",
    "highlight-3-desc": "Higher pressure & emission angle",
    "aidvd-title": "AIDVD – Ultrasonic Intelligence for Angle / Identification / Distance / Velocity / Density",
    "aidvd-subtitle": "Sound-centered sensing that redefines how machines perceive the world.",
    "aidvd-pill-a": "A",
    "aidvd-pill-i": "I",
    "aidvd-pill-d": "D",
    "aidvd-pill-v": "V",
    "aidvd-pill-d2": "D",
    "aidvd-card-a-heading": "Angle",
    "aidvd-card-a-desc": "Measures rotational angles and positions.",
    "aidvd-card-a-adv": "True non-contact; immune to magnetic and thermal drift.",
    "aidvd-card-a-app": "Use: servo joints, robot joints, precision actuators.",
    "aidvd-card-i-heading": "Identification",
    "aidvd-card-i-desc": "Acoustic signatures identify materials or objects.",
    "aidvd-card-i-adv": "Enables intelligent sensing and classification.",
    "aidvd-card-i-app": "Use: industrial inspection, smart robots, material sorting.",
    "aidvd-card-d-heading": "Distance",
    "aidvd-card-d-desc": "TOF or phase-based ranging for distance and position.",
    "aidvd-card-d-adv": "High-resolution sensing unaffected by light or magnets.",
    "aidvd-card-d-app": "Use: automation, UAVs, obstacle avoidance, safety zones.",
    "aidvd-card-v-heading": "Velocity",
    "aidvd-card-v-desc": "Doppler-based measurement of motion speed or flow.",
    "aidvd-card-v-adv": "Real-time tracking without optical limits.",
    "aidvd-card-v-app": "Use: flow monitoring, motor feedback, robot navigation.",
    "aidvd-card-d2-heading": "Density",
    "aidvd-card-d2-desc": "Infers material or liquid density via sound velocity.",
    "aidvd-card-d2-adv": "Monitoring without contact or sampling.",
    "aidvd-card-d2-app": "Use: process control, liquid analysis, industrial sensing.",
    "servo-title": "Servo Motors & Ultrasonic Angle Sensing",
    "servo-subtitle": "Next-generation non-contact feedback for humanoid robots and precision actuators.",
    "servo-paragraph-1": "Humanoid robots often adopt around 18 servo motors per unit; servo precision, reliability, and durability directly impact performance and cost.",
    "servo-paragraph-2": "Traditional potentiometers, optical encoders, and magnetic sensors may face wear, contamination, or magnetic interference. YiSONIC pairs TOUNGMEI’s motor R&D and manufacturing with in-house ultrasonic sensors and readout ICs.",
    "servo-list-title": "What it delivers",
    "servo-list-1": "High-precision, non-contact angle sensing",
    "servo-list-2": "High sensitivity and temperature robustness",
    "servo-list-3": "Immune to electromagnetic and optical contamination",
    "servo-list-4": "Fits robot joints, gimbals, industrial servos, automotive actuators",
    "adv-title": "Advantages over Traditional Sensing",
    "adv-subtitle": "Beyond optical and magnetic sensing in harsh environments.",
    "adv-th-tech": "Technology",
    "adv-th-advantage": "Strengths",
    "adv-th-limit": "Limitations",
    "adv-th-application": "Typical Applications",
    "adv-optical-tech": "Optical encoder",
    "adv-optical-adv": "Extremely high resolution and accuracy, excellent repeatability, immune to magnetic fields.",
    "adv-optical-limit": "Sensitive to dust, oil, moisture, and vibration; needs clean optical path and precise alignment.",
    "adv-optical-app": "—",
    "adv-hall-tech": "Hall / magnetic sensing",
    "adv-hall-adv": "Compact, relatively low cost, no wear, wide temperature range.",
    "adv-hall-limit": "Limited dynamic range; external magnetic fields and long-term drift must be managed.",
    "adv-hall-app": "—",
    "adv-ultra-tech": "YiSONIC ultrasonic",
    "adv-ultra-adv": "True non-contact; immune to magnetic, optical, and electrical interference; stable in high-temperature and strong-field environments; no optical alignment or magnetic shielding needed, with potential system cost reduction via MEMS ultrasonic chips.",
    "adv-ultra-limit": "Spatial resolution typically below top-end optical encoders; airflow, humidity, and acoustic noise must be managed; requires well-designed sound paths and calibration.",
    "adv-ultra-app": "Servo systems in high-temperature, high-magnetic, or dusty environments; next-generation robotic joints.",
    "manu-title": "Manufacturing & Partner Capabilities",
    "manu-subtitle": "From chips and sensors to custom micro motors and gimbals for mass production.",
    "manu-item-1-title": "Motor R&D and in-house production",
    "manu-item-1-desc": "DC and BLDC motors, gearboxes, and mechanisms customized for medical, robotics, and smart wearables.",
    "manu-item-2-title": "R&D and patents",
    "manu-item-2-desc": "50+ engineers and 60+ patents in micro motor and control, enabling fast integration of YiSONIC ultrasonic tech.",
    "manu-item-3-title": "Automated lines",
    "manu-item-3-desc": "1000+ sets of automation equipment covering assembly, testing, and quality traceability for stable yields.",
    "manu-item-4-title": "Gimbals and precision control",
    "manu-item-4-desc": "High-performance gimbals with 0.0005° angle resolution, high load and precision, dynamic balancing, and multiple damping levels for LiDAR, UAVs, and imaging.",
    "contact-title": "Contact",
    "contact-subtitle": "Let’s explore next-generation sensing and servo systems together.",
    "contact-company-label": "Company:",
    "contact-company": "YiSONIC Semi.",
    "contact-person-label": "Contact:",
    "contact-person": "Eason, Y.H. Chiu Ph.D.",
    "contact-email-label": "Email:",
    "contact-email": "eason@yisonic.com",
    "contact-website-label": "Website:",
    "contact-website": "www.yisonic.com",
    "contact-phone-label": "Phone:",
    "contact-phone": "+886-913 313 523",
    "form-name-label": "Name",
    "form-name-placeholder": "Your name",
    "form-email-label": "Email",
    "form-email-placeholder": "you@example.com",
    "form-company-label": "Company",
    "form-company-placeholder": "Your company",
    "form-message-label": "Message",
    "form-message-placeholder": "Tell us about your needs",
    "form-submit": "Send",
    "form-success": "Thanks! We’ve received your message.",
    "form-error": "Please fill out all fields.",
    "form-invalid-email": "Please enter a valid email.",
    "footer-text": "YiSONIC Semi. · The Sound of Precision"
  },
  ja: {
    "site-title": "奕芯半導體 YiSONIC Semi.",
    "brand-tagline": "The Sound of Precision",
    "logo-mark": "Yi",
    "nav-home": "ホーム",
    "nav-about": "企業紹介",
    "nav-tech": "コア技術",
    "nav-aidvd": "AIDVD 応用",
    "nav-servo": "サーボモータソリューション",
    "nav-adv": "優位性",
    "nav-manufacturing": "製造・パートナー",
    "nav-contact": "お問い合わせ",
    "lang-en": "English",
    "lang-ja": "日本語",
    "hero-title": "次世代精密センシングのための超音波インテリジェンス",
    "hero-subtitle": "YiSONIC Semi. は窒化アルミニウム (AlN) 圧電マイクロマシンド超音波トランスデューサ (PMUT) チップとモジュールを専門とし、「音」を角度・識別・距離・速度・密度の高精度センシングへと変換し、ロボット・自動車・産業制御分野に安定したソリューションを提供します。",
    "hero-cta-1": "技術優位性を見る",
    "hero-cta-2": "お問い合わせ",
    "hero-bullet-1": "独自開発の AlN ベース PMUT チップと超音波センシングシステム",
    "hero-bullet-2": "非接触で電磁ノイズや高温に強い角度・距離計測",
    "hero-bullet-3": "サーボモータとカスタムマイクロモータを組み合わせた AIDVD ソリューション",
    "hero-visual-title": "AlN PMUT",
    "hero-visual-highlight": "Ultrasonic Intelligence",
    "hero-visual-note": "Angle · Identification · Distance · Velocity · Density",
    "about-title": "奕芯半導體とTOUNGMEIについて",
    "about-subtitle": "台北のコア技術と中国本土の強力な販売ネットワークをつなぐ。",
    "about-card-1-title": "奕芯半導體（台北）",
    "about-card-2-title": "創業者と研究開発",
    "about-card-3-title": "TOUNGMEI（香港・深圳・上海）",
    "about-paragraph-1": "奕芯半導體は独自開発の AlN ベース PMUT チップと超音波システムにより、Angle・Identification・Distance・Velocity・Density の 5 つの次元で完全なセンシング／測定ソリューションを提供します。",
    "about-paragraph-2": "創業者の邱奕翔博士は北京大学 集成回路学院で博士号を取得し、AlN PMUT 技術と超音波 TOF システムに関する多数の論文と 29 件以上の発明特許を保有しています。",
    "about-paragraph-3": "TOUNGMEI は香港・深圳・上海を拠点に 30 年以上の販売実績を持ち、自動車・モバイル機器・家電・ロボットなど 300 社以上の顧客に BLDC モータやコネクタ、精密部品を供給しています。",
    "about-metric-1-title": "29+",
    "about-metric-1-desc": "特許・研究成果",
    "about-metric-2-title": "30+",
    "about-metric-2-desc": "販売・チャネル経験（年）",
    "about-metric-3-title": "300+",
    "about-metric-3-desc": "取引先とパートナーブランド",
    "tech-title": "コア技術 – AlN PMUT 超音波マイクロシステム",
    "tech-subtitle": "デバイス構造から読み出し回路まで、高安定・高分解能を追求。",
    "tech-card-1-title": "革新的な懸架構造",
    "tech-card-1-desc": "ダブルビーム懸吊の AlN PMUT で音圧を高め、放射角を拡大。短〜中距離や狭小スペースに最適。",
    "tech-card-2-title": "温度信頼性",
    "tech-card-2-desc": "環境温度変化での実測とモデル検証により実使用時の安定性を確保。電源エレクトロニクスや高電力システムの熱管理に対応。",
    "tech-card-3-title": "低消費電力 TDC 読み出し",
    "tech-card-3-desc": "PMUT を統合した超音波 TOF 読み出し IC。最大 5 m の距離測定で誤差は約 0.63 mm、電池駆動の高集積モジュールに適合。",
    "highlight-1-title": "5 m",
    "highlight-1-desc": "超音波測距レンジ",
    "highlight-2-title": "≈ 0.63 mm",
    "highlight-2-desc": "距離誤差",
    "highlight-3-title": "ダブルビーム",
    "highlight-3-desc": "音圧と放射角を向上",
    "aidvd-title": "AIDVD 超音波インテリジェンス",
    "aidvd-subtitle": "音を中心に、機械の認識方法を再構築。",
    "aidvd-pill-a": "A",
    "aidvd-pill-i": "I",
    "aidvd-pill-d": "D",
    "aidvd-pill-v": "V",
    "aidvd-pill-d2": "D",
    "aidvd-card-a-heading": "Angle（角度）",
    "aidvd-card-a-desc": "非接触で回転角度を計測。",
    "aidvd-card-a-adv": "磁場や温度の影響を受けにくい。",
    "aidvd-card-a-app": "用途：サーボ関節、ロボット関節、精密アクチュエータ。",
    "aidvd-card-i-heading": "Identification（識別）",
    "aidvd-card-i-desc": "音響シグネチャで材料や対象を識別。",
    "aidvd-card-i-adv": "スマートなセンシングと分類を実現。",
    "aidvd-card-i-app": "用途：工業検査、スマートロボット、材料ソーティング。",
    "aidvd-card-d-heading": "Distance（距離）",
    "aidvd-card-d-desc": "飛行時間や位相差から距離・位置を高分解能で検出。",
    "aidvd-card-d-adv": "光や磁場の影響を受けず精度を維持。",
    "aidvd-card-d-app": "用途：自動化、UAV、障害回避、安全距離監視。",
    "aidvd-card-v-heading": "Velocity（速度）",
    "aidvd-card-v-desc": "ドップラー効果で速度や流速をリアルタイム計測。",
    "aidvd-card-v-adv": "光学の制約なくトラッキング。",
    "aidvd-card-v-app": "用途：流体モニタリング、モータフィードバック、ロボットナビ。",
    "aidvd-card-d2-heading": "Density（密度）",
    "aidvd-card-d2-desc": "音速と媒体特性から材料・液体の密度を推定。",
    "aidvd-card-d2-adv": "非接触・無試料でのモニタリング。",
    "aidvd-card-d2-app": "用途：プロセス制御、液体分析、産業センシング。",
    "servo-title": "超音波サーボモータ角度フィードバック",
    "servo-subtitle": "ヒューマノイドロボットや高性能アクチュエータ向けの新しい選択肢。",
    "servo-paragraph-1": "ヒューマノイドロボットは 1 台あたり約 18 個のサーボモータを搭載することが多く、精度・信頼性・耐熱性が性能とコストに直結します。",
    "servo-paragraph-2": "電位器・光学エンコーダ・磁気センサは摩耗や汚れ、磁気干渉の課題があり、TOUNGMEI のモータ開発と製造力に奕芯の超音波センサと読み出し IC を組み合わせて解決します。",
    "servo-list-title": "特長",
    "servo-list-1": "高精度・非接触の角度計測",
    "servo-list-2": "高感度で高温環境にも対応",
    "servo-list-3": "電磁場や光学ノイズの影響を受けにくい",
    "servo-list-4": "ロボット関節、ジンバル、産業サーボ、車載アクチュエータに適合",
    "adv-title": "従来センシングとの比較",
    "adv-subtitle": "光学・磁気方式を補完する、過酷環境向けソリューション。",
    "adv-th-tech": "技術",
    "adv-th-advantage": "優位性",
    "adv-th-limit": "制約",
    "adv-th-application": "典型用途",
    "adv-optical-tech": "光学エンコーダ",
    "adv-optical-adv": "極めて高い分解能と精度、再現性に優れ、磁場の影響を受けない。",
    "adv-optical-limit": "粉塵・油分・湿気・振動に敏感で、光路の清浄さと精密な位置合わせが必要。",
    "adv-optical-app": "—",
    "adv-hall-tech": "ホール / 磁気センサ",
    "adv-hall-adv": "小型で比較的低コスト、摩耗がなく広い温度範囲で使用可能。",
    "adv-hall-limit": "ダイナミックレンジが限られ、外部磁場や長期ドリフトへの配慮が必要。",
    "adv-hall-app": "—",
    "adv-ultra-tech": "奕芯の超音波センシング",
    "adv-ultra-adv": "真の非接触で磁気・光学・電気ノイズの影響を受けにくく、高温・強磁場でも安定。光学調整や磁気シールド不要で、MEMS 超音波チップによりコスト低減も期待。",
    "adv-ultra-limit": "空間分解能は最高級光学エンコーダより低い場合が多い。気流・湿度・音響ノイズの考慮と音路設計、校正が必要。",
    "adv-ultra-app": "高温・強磁場・粉塵環境のサーボシステム、次世代ロボット関節など。",
    "manu-title": "製造能力とパートナーシップ",
    "manu-subtitle": "チップからセンサー、マイクロモータ、ジンバルまで量産可能なソリューション。",
    "manu-item-1-title": "モータ開発と自社製造",
    "manu-item-1-desc": "DC・BLDC モータ、ギアボックス、機構設計を医療・ロボット・ウェアラブル向けにカスタマイズ。",
    "manu-item-2-title": "研究開発と特許",
    "manu-item-2-desc": "50 名以上のエンジニアと 60 件超のマイクロモータ関連特許で、奕芯の超音波技術導入を加速。",
    "manu-item-3-title": "自動化ライン",
    "manu-item-3-desc": "1000 台以上の自動化設備で組立・検査・品質トレーサビリティを実現し、量産の歩留まりと納期を安定化。",
    "manu-item-4-title": "ジンバルと精密制御",
    "manu-item-4-desc": "角度分解能 0.0005°、高負荷・高精度、動的バランスと多段減衰を備え、LiDAR・UAV・映像システムをサポート。",
    "contact-title": "お問い合わせ",
    "contact-subtitle": "次世代センシングとサーボシステムについて、お気軽にご相談ください。",
    "contact-company-label": "会社：",
    "contact-company": "奕芯半導體股份有限公司 YiSONIC Semi.",
    "contact-person-label": "担当：",
    "contact-person": "Eason, Y.H. Chiu Ph.D.",
    "contact-email-label": "Email：",
    "contact-email": "eason@yisonic.com",
    "contact-website-label": "Website：",
    "contact-website": "www.yisonic.com",
    "contact-phone-label": "Phone：",
    "contact-phone": "+886-913 313 523",
    "form-name-label": "お名前",
    "form-name-placeholder": "お名前",
    "form-email-label": "Email",
    "form-email-placeholder": "you@example.com",
    "form-company-label": "会社名",
    "form-company-placeholder": "会社名",
    "form-message-label": "メッセージ",
    "form-message-placeholder": "ご要望やお問い合わせ内容",
    "form-submit": "送信",
    "form-success": "送信ありがとうございます。メッセージを受け付けました。",
    "form-error": "すべての項目を入力してください。",
    "form-invalid-email": "有効な Email を入力してください。",
    "footer-text": "YiSONIC Semi. · The Sound of Precision"
  }
};

const fallbackLang = "en";
let currentLang = localStorage.getItem("yisonic-lang") || fallbackLang;

const getString = (lang, key) => content[lang]?.[key] ?? content[fallbackLang]?.[key] ?? "";

const applyLanguage = (lang) => {
  const targetLang = content[lang] ? lang : fallbackLang;
  currentLang = targetLang;
  document.documentElement.lang = targetLang;
  document.title = getString(targetLang, "site-title") || "YiSONIC Semi.";

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.dataset.i18n;
    const value = getString(targetLang, key);
    if (value !== undefined) {
      el.textContent = value;
    }
  });

  document.querySelectorAll("[data-i18n-placeholder]").forEach((el) => {
    const key = el.dataset.i18nPlaceholder;
    const value = getString(targetLang, key);
    if (value !== undefined) {
      el.placeholder = value;
    }
  });

  document.querySelectorAll(".lang-switch button").forEach((btn) => {
    btn.classList.toggle("active", btn.dataset.lang === targetLang);
  });

  localStorage.setItem("yisonic-lang", targetLang);
};

const initLanguageSwitch = () => {
  document.querySelector(".lang-switch")?.addEventListener("click", (e) => {
    const btn = e.target.closest("button[data-lang]");
    if (!btn) return;
    applyLanguage(btn.dataset.lang);
  });
};

const initNavToggle = () => {
  const toggle = document.querySelector(".menu-toggle");
  const nav = document.querySelector(".main-nav");
  const header = document.querySelector(".site-header");
  if (!toggle || !nav) return;

  toggle.addEventListener("click", () => {
    const isOpen = nav.classList.toggle("open");
    toggle.setAttribute("aria-expanded", isOpen ? "true" : "false");
  });

  nav.querySelectorAll("a").forEach((link) => {
    link.addEventListener("click", () => {
      nav.classList.remove("open");
      toggle.setAttribute("aria-expanded", "false");
    });
  });

  header?.addEventListener("mouseleave", () => {
    nav.classList.remove("open");
    toggle.setAttribute("aria-expanded", "false");
  });
};

const initObserver = () => {
  const elements = document.querySelectorAll(".reveal");
  if (!("IntersectionObserver" in window)) {
    elements.forEach((el) => el.classList.add("visible"));
    return;
  }

  const observer = new IntersectionObserver(
    (entries, obs) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("visible");
          obs.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.2 }
  );

  elements.forEach((el) => observer.observe(el));
};

const initForm = () => {
  const form = document.getElementById("contact-form");
  if (!form) return;
  const messageEl = form.querySelector(".form-message");
  const emailPattern = /^[\w.-]+@([\w-]+\.)+[\w-]{2,}$/;

  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    const name = formData.get("name")?.toString().trim();
    const email = formData.get("email")?.toString().trim();
    const company = formData.get("company")?.toString().trim();
    const message = formData.get("message")?.toString().trim();

    if (!name || !email || !company || !message) {
      messageEl.textContent = getString(currentLang, "form-error");
      messageEl.className = "form-message error";
      return;
    }

    if (!emailPattern.test(email)) {
      messageEl.textContent = getString(currentLang, "form-invalid-email");
      messageEl.className = "form-message error";
      return;
    }

    messageEl.textContent = getString(currentLang, "form-success");
    messageEl.className = "form-message success";
    form.reset();
  });
};

const init = () => {
  applyLanguage(currentLang);
  initLanguageSwitch();
  initNavToggle();
  initObserver();
  initForm();
};

document.addEventListener("DOMContentLoaded", init);
